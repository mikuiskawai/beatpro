<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <title>Game Result</title>
    <style>
        /* 기본 설정 */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            opacity: 0;
            background-image: url(../../3d-abstract-space-sky-with-stars-nebula.jpg);
            background-size: cover;
            font-family: 'Bebas Neue', sans-serif;
            transition: opacity 1.5s ease; /* 페이드인/아웃 효과 시간 조정 */
            color: white;
        }

        /* 결과 컨테이너 */
        #result-container {
            display: flex;
            width: 80%;
            height: 80%;
            border: 2px solid #03e9f4;
            border-radius: 15px;
            padding: 20px;
            box-sizing: border-box;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
        }

        /* 음악 이미지와 점수 영역 */
        #music-info {
            width: 60%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* 음악 이미지 */
        #music-image {
            width: 100%;
            height: 100%;
            background-image: url(./스크린샷\ 2024-11-07\ 215933.png);
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #03e9f4;
            border-radius: 10px;
            font-size: 30px;
            color: white;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* 점수 정보 */
        #score-info {
            font-size: 64px;
            font-family: "Bebas neue";
            text-align: center;
            margin-top: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        /* 등급과 메시지 영역 */
        #grade-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 35%;
            justify-content: center;
        }

        /* 등급 원형 */
        #grade {
            border-radius: 50%;
            border: 5px solid #ffd900;
            width: 220px;
            height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 150px;
            color: #61571df2;
            background: radial-gradient(circle, #ffdd00, #ffaa00);
            box-shadow: 0px 4px 15px rgba(199, 170, 7, 0.7);
            animation: pulse 2s infinite;
        }

        /* 메시지 텍스트 */
        #message {
            font-size: 64px;
            margin-top: 15px;
            color: white;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.8);
            text-align: center;
        }

        /* Back 버튼 영역 */
        #back-button-container {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }


        /* 애니메이션 */
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 12px rgba(255, 215, 0, 0.6);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 0 20px rgba(255, 215, 0, 1);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 12px rgba(255, 215, 0, 0.6);
            }
        }
        /* Play 버튼 스타일 */
        a {
            position: relative;
            display: inline-block;
            padding: 10px 100px;
            color: #03e9f4;
            text-decoration: none;
            text-transform: uppercase;
            transition: 0.5s;
            letter-spacing: 4px;
            overflow: hidden;
            font-size: 36px;
            z-index: 1;
            cursor: pointer;
            margin-top: 20px;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid #03e9f4; /* 테두리 두께와 색상 */
        }

        a:hover {
            background: #03e9f4;
            color: #050801;
            box-shadow: 0 0 5px #03e9f4, 0 0 25px #03e9f4, 0 0 50px #03e9f4, 0 0 200px #03e9f4;
            -webkit-box-reflect: below 1px linear-gradient(transparent, #0005);
        }

        a span {
            position: absolute;
            display: block;
        }

        a span:nth-child(1) {
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #03e9f4);
            animation: animate1 1s linear infinite;
        }

        @keyframes animate1 {
            0% {
                left: -100%;
            }
            50%, 100% {
                left: 100%;
            }
        }

        a span:nth-child(2) {
            top: -100%;
            right: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, transparent, #03e9f4);
            animation: animate2 1s linear infinite;
            animation-delay: 0.25s;
        }

        @keyframes animate2 {
            0% {
                top: -100%;
            }
            50%, 100% {
                top: 100%;
            }
        }

        a span:nth-child(3) {
            bottom: 0;
            right: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(270deg, transparent, #03e9f4);
            animation: animate3 1s linear infinite;
            animation-delay: 0.50s;
        }

        @keyframes animate3 {
            0% {
                right: -100%;
            }
            50%, 100% {
                right: 100%;
            }
        }

        a span:nth-child(4) {
            bottom: -100%;
            left: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(360deg, transparent, #03e9f4);
            animation: animate4 1s linear infinite;
            animation-delay: 0.75s;
        }

        @keyframes animate4 {
            0% {
                bottom: -100%;
            }
            50%, 100% {
                bottom: 100%;
            }
        }
        .fade-in {
            opacity: 1; /* 페이드인 시 서서히 나타남 */
        }

        .fade-out {
            opacity: 0; /* 페이드아웃 시 서서히 사라짐 */
        }
    </style>
</head>
<body>
    <audio id="click-sound" src="../../615526__crash_358__sci-fi-ui-button-sound-003.wav" preload="auto"></audio>
    <div id="result-container">
        <!-- 음악 이미지와 점수 영역 -->
        <div id="music-info">
            <div id="music-image">
                <p></p> <!-- 이미지 영역 -->
            </div>
            <div id="score-info">
                <div id="score" onclick="">SCORE: 000000</div>
                <div id="max-combo">Max Combo: 100</div>
            </div>
        </div>

        <!-- 등급 및 메시지 영역 -->
        <div id="grade-container">
            <div id="grade">S</div>
            <div id="message">Excellent!!</div>
            <a onclick="goBack()">
                 Go to main 
                <span></span><span></span><span></span><span></span>
            </a>
            <a onclick="replayBack()">
                play  more
                <span></span><span></span><span></span><span></span>
            </a>
        </div>
    </div>

    <script>
        // URL 파라미터로 전달된 점수와 콤보 받아오기
        const params = new URLSearchParams(window.location.search);
        const score = params.get('score') || 0;
        const maxCombo = params.get('maxCombo') || 0;
        const message = params.get('message') || 'Excellent!!';

        // 점수와 콤보 표시
        document.getElementById('score').innerText = `SCORE: ${score}`;
        document.getElementById('max-combo').innerText = `Max Combo: ${maxCombo}`;
        document.getElementById('message').innerText = message;
        window.onload = function() {
            function changeGradeColor(color) {
                document.getElementById('grade').style.color = color;
            }
            function changeGradeColor(color) {
                document.getElementById('grade').style.color = color;
            }
            // 'Full combo!'인지 확인
            if (message === 'Full combo!') {
                document.getElementById('grade').textContent = 'FC';
                document.getElementById('message').textContent = 'Full combo!';
            }else if (message === 'Perfect!') {
                document.getElementById('grade').textContent = 'P';
                document.getElementById('message').textContent = 'Perfect!';
            }else if (message === 'Excellent!') {
                document.getElementById('grade').textContent = 'E';
                document.getElementById('message').textContent = 'Excellent!';
            }else if (message === 'Good!') {
                document.getElementById('grade').textContent = 'G';
                document.getElementById('message').textContent = 'Good!';
            }else if (message === 'Bad!') {
                document.getElementById('grade').textContent = 'B';
                document.getElementById('message').textContent = 'Bad!';
            }
            else if (message === 'Fail!') {
                document.getElementById('grade').textContent = 'F';
                document.getElementById('message').textContent = 'Fail!';
            }
        };
        window.addEventListener('load', () => {
            document.body.classList.add('fade-in'); // 페이지 로드 시 페이드인 효과 적용
        });
        // 메인 화면으로 돌아가기
        function goBack() {
            playClickSound(event);
            document.body.classList.remove('fade-in'); // 페이드인 클래스 제거
            document.body.classList.add('fade-out'); // 페이드아웃 클래스 추가
            setTimeout(() => {
                window.location.href = "../../main.html";
            }, 1500); // 페이드아웃 시간에 맞춰 페이지 전환
        }
        function replayBack() {
            playClickSound(event);
            document.body.classList.remove('fade-in'); // 페이드인 클래스 제거
            document.body.classList.add('fade-out'); // 페이드아웃 클래스 추가
            setTimeout(() => {
                window.location.href = "./index.html";
            }, 1500); // 페이드아웃 시간에 맞춰 페이지 전환
        }
        function playClickSound(event) {
            event.preventDefault(); // 기본 동작(페이지 이동) 막기
            const clickSound = document.getElementById('click-sound');
            clickSound.play();
        }
    </script>
</body>
</html>
